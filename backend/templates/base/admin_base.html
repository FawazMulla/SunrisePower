<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Solar CRM Admin{% endblock %}</title>
    
    <!-- Google Fonts - Poppins (same as website) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Admin Base CSS -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'admin/css/admin-base.css' %}">
    
    <!-- Additional CSS -->
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Admin Header -->
    <header class="admin-header">
        <nav class="admin-navbar">
            <div class="admin-logo">
                <a href="{% url 'admin:dashboard' %}">
                    <img src="{% static 'sunrise power logo.png' %}" alt="Sunrise Power">
                </a>
            </div>
            
            <ul class="admin-nav-links">
                <li><a href="{% url 'admin:dashboard' %}" class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a></li>
                <li><a href="{% url 'admin:leads' %}" class="{% if 'leads' in request.resolver_match.url_name %}active{% endif %}">
                    <i class="fas fa-user-plus"></i> Leads
                </a></li>
                <li><a href="{% url 'admin:customers' %}" class="{% if 'customers' in request.resolver_match.url_name %}active{% endif %}">
                    <i class="fas fa-users"></i> Customers
                </a></li>
                <li><a href="{% url 'admin:services' %}" class="{% if 'services' in request.resolver_match.url_name %}active{% endif %}">
                    <i class="fas fa-tools"></i> Services
                </a></li>
                <li><a href="{% url 'admin:analytics' %}" class="{% if 'analytics' in request.resolver_match.url_name %}active{% endif %}">
                    <i class="fas fa-chart-bar"></i> Analytics
                </a></li>
            </ul>
            
            <div class="admin-user-info">
                {% if user.is_authenticated %}
                    <span class="user-name">
                        <i class="fas fa-user-circle"></i>
                        {{ user.get_full_name|default:user.username }}
                    </span>
                    <form method="post" action="{% url 'admin:logout' %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="admin-logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </form>
                {% else %}
                    <a href="{% url 'admin:login' %}" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </a>
                {% endif %}
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="admin-container">
        <!-- Messages -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    <i class="fas fa-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'warning' %}exclamation-triangle{% elif message.tags == 'error' %}times-circle{% else %}info-circle{% endif %}"></i>
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <!-- Page Content -->
        {% block content %}{% endblock %}
    </main>

    <!-- Admin Footer -->
    <footer class="admin-footer">
        <p>&copy; {% now "Y" %} Sunrise Power. All rights reserved. | 
           <a href="mailto:info@sunrisepower.com">Contact Support</a> | 
           <a href="{% url 'admin:dashboard' %}">Admin Dashboard</a>
        </p>
    </footer>

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    {% block extra_js %}{% endblock %}
    
    <!-- Admin Base JavaScript -->
    <script>
        // Mobile menu toggle (if needed in future)
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-hide alerts after 5 seconds
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                setTimeout(() => {
                    alert.style.opacity = '0';
                    setTimeout(() => alert.remove(), 300);
                }, 5000);
            });
            
            // Confirm delete actions
            const deleteButtons = document.querySelectorAll('[data-confirm-delete]');
            deleteButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    if (!confirm('Are you sure you want to delete this item? This action cannot be undone.')) {
                        e.preventDefault();
                    }
                });
            });
        });
    </script>
</body>
</html>